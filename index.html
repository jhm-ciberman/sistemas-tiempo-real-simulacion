<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulacion Sistemas de tiempo real</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3"></script>
    <script src="simulation.js"></script>
    <script src="graph.js"></script>
    <script src="main.js"></script>
</head>
<body>
    <div class="container">
        <h1>Simulacion Sistemas de tiempo real</h1>
        <p>Alumno: Javier Hernán Mora. Universidad FASTA.</p>
        <h2>Ejercicio 1: </h2>
        <hr>
        <p>Se tiene un sistema de control de la temperatura de un recinto. La variable manipulada es caudal de gas (Cg). El proceso se comporta según la siguiente expresión:</p>
        <img src="formula.png" alt="Formula">
        <p>Donde:</p>
        <ul>
            <li><b>ΔTi</b> es la temperatura en el recinto.</li>
            <li><b>Te</b> es la temperatura exterior.</li>
            <li><b>ΔCg</b> es el caudal de gas.</li>
            <li><b>V</b> es el volumen del reciento.</li>
            <li><b>C1</b>, <b>C2</b> y <b>M</b> son constantes características del proceso.</li>
        </ul>
        <p class="text-primary text-bold">a) Simular el comportamiento dinámico del proceso para lazo abierto, utilizando el método de resolución de ecuaciones diferenciales de Euler.</p>
        <div class="row mb-2">
            <div class="col">
                <label for="value-v">V</label>
                <input type="number" class="form-control simulation-value" name="value-v" id="value-v" value="25">
            </div>
            <div class="col">
                <label for="value-c1">C1</label>
                <input type="number" class="form-control simulation-value" name="value-c1" id="value-c1" value="200">
            </div>
            <div class="col">
                <label for="value-c2">C2</label>
                <input type="number" class="form-control simulation-value" name="value-c2" id="value-c2" value="2">
            </div>
            <div class="col">
                <label for="value-m">M</label>
                <input type="number" class="form-control simulation-value" name="value-m" id="value-m" value="10">
            </div>
        </div>
        <div class="row mb-4">
            <div class="col">
                <label for="value-temp-ext">Temperatura exterior</label>
                <input type="number" class="form-control simulation-value" name="value-temp-ext" id="value-temp-ext" value="18">
            </div>
            <div class="col">
                <label for="value-temp-int">Temperatura interior</label>
                <input type="number" class="form-control simulation-value" name="value-temp-int" id="value-temp-int" value="18">
            </div>
            <div class="col">
                <label for="value-gas-caudal">Caudal de gas</label>
                <input type="number" class="form-control simulation-value" name="value-gas-caudal" id="value-gas-caudal" value="10">
            </div>
            <div class="col">
                <label for="value-sim-time">Tiempo de simulación (hs)</label>
                <input type="number" class="form-control simulation-value" name="value-sim-time" id="value-sim-time" value="10">
            </div>
        </div>
        <p class="text-primary">b) Obtener un gráfico del comportamiento dinámico del proceso (temperatura Ti en función del tiempo).</p>
        <canvas id="chart1" style="max-width: 1000px; max-height: 600px;"></canvas>
        <p class="text-primary">c) Indicar en el gráfico la constante de tiempo del proceso.</p>
        <p>La constante de tiempo está dada por la fórmula: <code>C1 / (C2 * V)</code>. El valor es de <code class="display-time-constant1">4</code> horas</p>
        <p class="text-primary">d) Analizar cómo varía el comportamiento simulado si se duplica el volumen del recinto o si se reduce a la mitad.</p>
        <canvas id="chart2" style="max-width: 1000px; max-height: 600px;"></canvas>
        <p class="text-primary">e) ¿Qué sucede con la constante de tiempo para las situaciones del inciso d?</p>
        <p>En el primer caso, constante de tiempo se reduce a la mitad (De <code class="display-time-constant1">4</code> pasa a ser <code class="display-time-constant2">2</code>)</p>
        <p>En el segundo caso, constante de tiempo aumenta al doble (De <code class="display-time-constant1">4</code> pasa a ser <code class="display-time-constant3">8</code>)</p>
    
        <h2>Ejercicio 2: </h2>
        <p>Se coloca una válvula para controlar la temperatura en el recinto del ejercicio anterior. Entonces, el caudal
            de gas Cg será manipulado para controlar la temperatura. Por lo tanto, Ti no es una variable libre, sino
            que se verá afectada por una válvula de control.</p>
        <ul>
            <li><b>kv</b> = 2 m<sup>3</sup> / (h * psi)</li>
            <li><b>kh</b> = 0,05 mA / ºC</li>
        </ul>
        <p>Considerar que en estado estacionario, la temperatura del recinto Ti es 18 ºC, y el resto de las variables
            del lazo valen 0. (El lazo permanece en ese estado hasta que se pida una temperatura diferente.
            A la salida del controlador, se coloca un transductor que, por cada mA, entrega 1 psi.
            Considerar un valor deseado de 24ºC.</p>

        <p class="text-primary">a) Efectuar la simulación del lazo cerrado para los siguientes valores de kc: 10, 25, 50, 100 y 500. Si para
            los valores indicados, no es posible observar el valor del error estacionario, elegir otros valores de kc, mayores o menores, según corresponda.</p>

        <div class="row mb-4">
            <div class="col">
                <label for="value-kc-list">Valores de KC separados por comas</label>
                <input type="text" class="form-control simulation-value" name="value-kc-list" id="value-kc-list1" value="10, 25, 50, 100, 500">
            </div>
        </div>
        <div class="row mb-4">
            <div class="col">
                <label for="value-kv">KV</label>
                <input type="number" class="form-control simulation-value" name="value-kv" id="value-kv" value="2">
            </div>
            <div class="col">
                <label for="value-kh">KH</label>
                <input type="number" class="form-control simulation-value" name="value-kh" id="value-kh" value="0.05">
            </div>
            <div class="col">
                <label for="value-target-temp">Temperatura esperada</label>
                <input type="number" class="form-control simulation-value" name="value-target-temp" id="value-target-temp" value="24">
            </div>
        </div>

        <p class="text-primary">b) Para cada caso, obtener un gráfico del comportamiento dinámico del lazo (temperatura en función deltiempo).</p>
        <canvas id="chart3" style="max-width: 1000px; max-height: 600px;"></canvas>
        <p class="text-primary">c) Para cada valor de kc, calcular la constante de tiempo del lazo cerrado, mostrando su ubicación en el gráfico correspondiente.</p>
        <div id="display-closed-loop1-time-constant">Resultados de la simulación</div>
        <p class="text-primary">d) Para cada valor de kc, calcular la constante K del Lazo.</p>
        <div id="display-closed-loop1-k">Resultados de la simulación</div>
        <p class="text-primary">e) Para cada valor de kc, calcular el valor del error estacionario (en las unidades de la variable directamente controlada) y verificarlo en los gráficos obtenidos.</p>
        <div id="display-closed-loop1-sse">Resultados de la simulación</div>
        <p class="text-primary">f) Hacer un gráfico que permita comparar las curvas correspondientes a los diferentes valores de kc.</p>
        <p>Arriba.</p>
        <p class="text-primary">g) Analizar los resultados obtenidos, comparándolos entre sí, y con los resultados obtenidos para lazo abierto.</p>
        <p>Con el modelo de lazo cerrado se puede observar como la variable llega al valor esperado de forma mucho más rápida que con un lazo abierto.</p>
    
        <h2>Ejercicio 3: </h2>

        <p>En el ejercicio 2, se consideró que la válvula se comportaba linealmente. Es decir que:</p>
        <img src="formula_3a.png" alt="Formula">
        <p>Si se considera el comportamiento de una válvula real, se tiene que:</p>
        <img src="formula_3b.png" alt="Formula">

        <p>El resto de los elementos conservan el comportamiento del ejercicio anterior.</p>
        <div class="row mb-4">
            <div class="col">
                <label for="value-kc-list">Valores de KC separados por comas</label>
                <input type="text" class="form-control simulation-value" name="value-kc-list" id="value-kc-list2" value="10, 25, 50, 100, 500, 1000">
            </div>
        </div>
        <div class="row mb-4">
            <div class="col">
                <label for="value-kt">Kt (psi/mA)</label>
                <input type="text" class="form-control simulation-value" name="value-kt" id="value-kt" value="1">
            </div>
            <div class="col">
                <label for="value-fsv">FSV</label>
                <input type="text" class="form-control simulation-value" name="value-fsv" id="value-fsv" value="5">
            </div>
            <div class="col">
                <label for="value-fk">FK</label>
                <input type="text" class="form-control simulation-value" name="value-fk" id="value-fk" value="5">
            </div>
        </div>
        <p class="text-primary">a) Efectuar la simulación para los mismos valores de kc del ejercicio 2, agregando el valor kc=1000, y
        obtener un gráfico del comportamiento dinámico del lazo, para cada valor.</p>
        <canvas id="chart4" style="max-width: 1000px; max-height: 600px;"></canvas>
        <p class="text-primary">b) Para cada valor de kc, calcular la constante K del Lazo.</p>
        <div id="display-closed-loop2-k">Resultados de la simulación</div>
        <p class="text-primary">c) Para cada valor de kc, calcular el valor del error estacionario y verificarlo en los gráficos obtenidos.</p>
        <div id="display-closed-loop2-sse">Resultados de la simulación</div>
        <p class="text-primary">d) Hacer un gráfico que permita comparar las curvas correspondientes a los diferentes valores de kc.</p>
        <p class="text-primary">e) Analizar los resultados obtenidos, comparándolos entre sí y con los resultados del ejercicio 2.
        ¿El error estacionario obtenido para un mismo valor de kc es igual, mayor o menor que en el
        ejercicio 2? ¿Por qué?</p>
        <p>En el caso concreto del trabajo practico (sin modificar ningun parámetro), el eror estacionario es mayor, ya que el valor de K es menor (porque el valor de KV es la mitad)</p>

        <h2>Ejercicio 4: </h2>

        <p>Una acción de control de tipo PD, es decir proporcional más derivativa, con lo cual:</p>
        <img src="formula_4a.png" alt="Formula">
        <div class="row mb-4">
            <div class="col">
                <label for="value-pd">Valores de KC y KD separados por comas. Un par kc, kd por linea.</label>
                <textarea class="form-control simulation-value" rows="7" name="value-pd" id="value-pd"></textarea>
            </div>
        </div>
        <p class="text-primary">a) Para cada caso, obtener un gráfico del comportamiento dinámico del lazo (temperatura en función del tiempo).</p>
        <canvas id="chart5" style="max-width: 1000px; max-height: 600px;"></canvas>
        <p class="text-primary">b) Hacer un gráfico que permita comparar la curvas correspondientes a las diferentes combinaciones.</p>
        <p>Arriba</p>
        <p class="text-primary">c) Analizar:
        <ul>
            <li>
                <p class="text-primary">¿Qué par de valores resulta más conveniente y por qué?</p>
                <p>Conviene tener un kc alto y un kd alto. El KC alto hace que se reduzca el error estacionario y el KD alto hace que se reduzcan las oscilaciones del sistema.</p>
            </li>
            <li>
                <p class="text-primary">¿Qué efectos produce la acción derivativa?</p>
                <p>La acción derivativa tiene el efecto de disminuir o reducir totalmente (dependiendo del valor de KD), las oscilaciones producidas por el comportamiento no lineal de los otros componentes del lazo (Valvula, proceso, etc)</p>
            </li>
            <li>
                <p class="text-primary">¿Qué ocurre al aumentar kc con y sin acción derivativa?</p>
                <p>Al aumentar el kc, se reduce el error estacionario. En el caso de que haya una acción derivativa, esta hace que las oscilaciones iniciales disminuyan, y en el caso de que no haya una acción derivativa, las oscilaciones iniciales son más fuertes.</p>
            </li>
        </ul>
        <p>Una acción de control de tipo PI, es decir proporcional más integrativa, con lo cual:</p>
        <img src="formula_4b.png" alt="Formula">
        <div class="row mb-4">
            <div class="col">
                <label for="value-pi">Valores de KC y KI separados por comas. Un par kc, kd por linea.</label>
                <textarea class="form-control simulation-value" rows="7" name="value-pi" id="value-pi"></textarea>
            </div>
        </div>
        <p class="text-primary">a) Para cada caso, obtener un gráfico del comportamiento dinámico del lazo (temperatura en función del tiempo).</p>
        <canvas id="chart6" style="max-width: 1000px; max-height: 600px;"></canvas>
        <p class="text-primary">b) Hacer un gráfico que permita comparar la curvas correspondientes a las diferentes combinaciones.</p>
        <p>Arriba</p>
        <p class="text-primary">c) Analizar:</p>
        <ul>
            <li>
                <p class="text-primary">¿Qué efectos produce la acción integral?</p>
                <p>La acción integral hace que se reduzca el error estacionario a (casi) cero. Cuanto más grande es la acción integral, más rápido se llega a la temperatura deseada del sistema. </p>
            </li>
            <li>
                <p class="text-primary">¿Qué ocurre al aumentar ki en lo que se refiere a las oscilaciones y al tiempo que tarda el lazo en estabilizarse?</p>
                <p>Cuanto más grande es KI, el tiempo que tarda el lazo es estabilizarse disminuye, pero aumentan las oscilaciones.</p>
                <p>Cuanto más chico es KI, el tiempo que tarda el lazo es estabilizarse aumenta, pero disminuye las oscilaciones (O más bien no se intensifican las oscilaciones).</p>
                <p>Una acción de control de tipo PID, es decir proporcional más derivativa más integrativa, con lo cual:</p>
            </li>
        </ul>
        <img src="formula_4c.png" alt="Formula">
        <div class="row mb-4">
            <div class="col">
                <label for="value-pid">Valores de KC, KD y KI separados por comas. Un par kc, kd, ki por linea.</label>
                <textarea class="form-control simulation-value" rows="7" name="value-pid" id="value-pid"></textarea>
            </div>
        </div>
        <p class="text-primary">a) Para cada caso, obtener un gráfico del comportamiento dinámico del lazo (temperatura en función del tiempo).</p>
        <canvas id="chart7" style="max-width: 1000px; max-height: 600px;"></canvas>
        <p class="text-primary">b) Hacer un gráfico que permita comparar la curvas correspondientes a las diferentes combinaciones.</p>
        <p>Arriba</p>
        <p class="text-primary">c) Analizar:</p>
        <ul>
            <li>
                <p class="text-primary">¿Qué combinación de valores resulta más conveniente y por qué?</p>
                <p>Depende mucho del problema, pero lo ideal es tener valores de KI y KD lo suficientemente altos para que se pueda disminuir las oscilaciones 
                y el error estacionario, pero no tan altos como para que se produzcan oscilaciones que hagan diverger del valor deseado.</p>
            </li>
            <li>
                <p class="text-primary">¿Qué efectos produce la acción PID?</p>
                <p>La acción PID es la combinación de PI + PD. Puede reducir las oscilaciones (Accion derivativa), y disminuir el error estacionario (Acción integral)</p>
            </li>
            <li>
                <p class="text-primary">Qué ocurre con las oscilaciones para las distintas combinaciones de valores para las constantes? ¿Por qué?</p>
                <p>Cuanto mayor es KD, menor son las oscilaciones, ya que la acción derivativa se encarga de agregar una fracción de la derivada en ese punto. Y esto hace que se disminuyan las oscilaciones.</p>
            </li>
            <li>
                <p class="text-primary">¿Qué ocurre con el error estacionario para las distintas combinaciones de valores para las constantes? ¿Por qué?</p>
                <p>Cuanto mayor es KI, menor es el error estacionario. Ya que la acción integral continuamente agrega una fracción del error al valor actual y por eso hace que disminuya el error estacionario.</p>
            </li>
        </ul>
    </div>
</body>
</html>